<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>Banking System - Login</title>
  </head>
  <body class="centered-content">
    <!-- Dark Mode Toggle Button - Moved outside container for absolute positioning -->
    <button
      id="darkModeToggle"
      class="dark-mode-toggle login-toggle"
      aria-label="Toggle dark mode"
    >
      <svg
        class="moon-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
      >
        <path d="M21 12.79A9 9 0 1 1 11.21 3 A7 7 0 0 0 21 12.79z" />
      </svg>
      <svg
        class="sun-icon"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
        fill="none"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="5" />
        <path
          d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"
        />
      </svg>
    </button>

    <div class="container">
      <div class="card">
        <div class="header">
          <h1>ðŸ’²JaBa BankingðŸ’²</h1>
          <p id="desc-text" class="description">Sign in to your account</p>

          <!-- Display error or success messages -->
          <div id="message-container"></div>
        </div>

        <div class="tabs">
          <div class="tab active" id="login-tab" onclick="switchTab('login')">
            Login
          </div>
          <div class="tab" id="register-tab" onclick="switchTab('register')">
            Register
          </div>
        </div>

        <form id="login-form" action="auth" method="post">
          <div class="form-group">
            <label for="email">Email</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="name@example.com"
              required
            />
            <!-- CORRECT: Matches req.getParameter("email") -->
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              required
            />
            <!-- CORRECT: Matches req.getParameter("password") -->
          </div>

          <div class="form-group">
            <label for="role">Role</label>
            <select id="role" name="role" required>
              <!-- CORRECT: Matches req.getParameter("role") -->
              <option value="customer">Customer</option>
              <option value="employee">Employee</option>
              Temporarily commented if not implemented
              <option value="admin">Admin</option>
            </select>
          </div>

          <button type="submit">Sign In</button>

          <div class="form-footer">
            <a href="#">Forgot password?</a>
          </div>
        </form>

        <!-- === Registration Form (RegisterServlet) === -->
        <form
          id="register-form"
          style="display: none"
          action="register"
          method="post"
        >
          <div class="form-group">
            <label for="register-name">Full Name</label>
            <input
              type="text"
              id="register-name"
              name="name"
              placeholder="John Doe"
              required
            />
            <!-- CHANGED: Was "register-name", now matches req.getParameter("name") -->
          </div>

          <div class="form-group">
            <label for="register-email">Email</label>
            <input
              type="email"
              id="register-email"
              name="email"
              placeholder="name@example.com"
              required
            />
            <!-- CHANGED: Was "register-email", now matches req.getParameter("email") -->
          </div>

          <div class="form-group">
            <label for="register-password">Password</label>
            <input
              type="password"
              id="register-password"
              name="password"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              required
            />
            <!-- CHANGED: Was "register-password", now matches req.getParameter("password") -->
          </div>

          <div class="form-group">
            <label for="register-confirm">Confirm Password</label>
            <input
              type="password"
              id="register-confirm"
              name="confirmPassword"
              placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
              required
            />
            <!-- CHANGED: Was "register-confirm", now matches req.getParameter("confirmPassword") -->
          </div>

          <!-- REMOVED Role Selection:
               The RegisterServlet as written defaults the role to "customer"
               and does not expect a role parameter from the form.
               If you need admins/employees to be created via a form,
               that would typically be a separate, secured administrative function.
          -->

          <button type="submit">Create Account</button>

          <div class="form-footer">
            Already have an account?
            <a href="#" onclick="switchTab('login')">Sign in</a>
          </div>
        </form>
      </div>
    </div>

    <!-- Replace inline script with external script reference -->
    <script src="./js/login.js"></script>
  </body>
</html>
